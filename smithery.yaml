startCommand:
  type: stdio
  configSchema:
    type: object
    required:
      - connection
    properties:
      connection:
        type: object
        required:
          - account
          - user
          - password
          - warehouse
          - database
          - schema
          - role
        properties:
          account:
            type: string
          user:
            type: string
          password:
            type: string
          warehouse:
            type: string
          database:
            type: string
          schema:
            type: string
          role:
            type: string
      allowedDatabases:
        type: array
        items:
          type: string
      allowedSchemas:
        type: array
        items:
          type: string
      allowedTables:
        type: array
        items:
          type: string
  commandFunction: |
    function(config) {
      const connection = JSON.stringify(config.connection);
      const allowedDatabases = config.allowedDatabases || [];
      const allowedSchemas = config.allowedSchemas || [];
      const allowedTables = config.allowedTables || [];
      
      return {
        command: "python",
        args: [
          "main.py",
          "--connection",
          connection,
          "--allowed-databases",
          ...allowedDatabases,
          "--allowed-schemas",
          ...allowedSchemas,
          "--allowed-tables",
          ...allowedTables
        ]
      };
    } 